# Инструкция по использованию PDF Coordinate Selector

## Описание

PDF Coordinate Selector - веб-инструмент для точного определения координат на PDF шаблонах сертификатов. Этот инструмент позволяет загружать PDF файлы, выбирать точные координаты для размещения текста и сохранять результаты для использования в системе генерации сертификатов.

## Установка

1. Просто откройте файл `coordinate_selector.html` в любом современном веб-браузере (Google Chrome, Mozilla Firefox, Microsoft Edge).
2. Никаких дополнительных установок не требуется - инструмент использует библиотеку PDF.js, загружаемую из CDN.

## Использование инструмента

### Загрузка PDF шаблона

1. Нажмите кнопку "Выберите PDF файл" и укажите нужный PDF-шаблон.
2. После загрузки PDF отобразится в центральной части экрана.
3. Если файл содержит несколько страниц, появится выпадающий список для выбора страницы.

### Настройка отображения

1. **Название шаблона**: Введите название шаблона, которое будет использоваться в коде (например, "БЕЗОПАСТНОСТЬ_И_ОХРАНА_ТРУДА_КОРОЧКА_1").
2. **Секция**: Выберите секцию шаблона (LEFT или RIGHT) в зависимости от того, какую часть шаблона вы настраиваете.
3. **Настройки сетки**:
   - Включите/выключите отображение сетки
   - Настройте размер ячеек сетки (по умолчанию 20px)
   - Включите/выключите привязку к сетке для выбора координат кратных размеру сетки
4. **Масштаб**: Выберите масштаб отображения PDF для более точной работы с деталями.

### Выбор координат

1. Наведите курсор на нужную точку PDF. Красный кружок-перекрестие поможет точно выбрать место.
2. Текущие координаты отображаются в правой панели и в нижнем правом углу экрана.
3. Щелкните на нужной точке для фиксации координат.
4. Выберите тип поля из выпадающего списка (fullname, job_title и т.д.).
5. Нажмите кнопку "Добавить координату" для сохранения.
6. Координата добавится в список "Сохраненные координаты".

### Работа с сохранёнными координатами

1. Все добавленные координаты отображаются в разделе "Сохраненные координаты".
2. Вы можете удалить любую координату, нажав кнопку "Удалить" рядом с ней.
3. Для удаления всех координат нажмите кнопку "Очистить все".

### Экспорт результатов

1. **Копирование кода**: Нажмите кнопку "Копировать код", чтобы скопировать сгенерированный Python-код для вставки в `image_certificate_generator.py`.
2. **Сохранение в JSON**: Нажмите "Сохранить координаты в JSON", чтобы сохранить файл координат, который можно будет открыть позже.
3. **Загрузка из JSON**: Нажмите "Загрузить координаты из JSON", чтобы загрузить ранее сохранённые координаты.

## Важные замечания

1. Все координаты вычисляются и отображаются в реальных координатах PDF, вне зависимости от масштаба отображения.
2. При включенной привязке к сетке координаты будут округляться до ближайшей линии сетки.
3. Для удобства навигации используйте разные значения масштаба: малый масштаб для общего обзора, увеличенный - для точной настройки.
4. Рекомендуется регулярно сохранять координаты в JSON-файл, чтобы избежать потери при случайном закрытии браузера.

## Перенос координат в генератор сертификатов

После определения всех необходимых координат у вас есть два способа переноса их в генератор сертификатов:

### Способ 1: Ручной перенос кода

1. Нажмите кнопку "Копировать код" в веб-интерфейсе.
2. Откройте файл `image_certificate_generator.py`.
3. Найдите константу `COORDINATES` (примерно строка 173).
4. Замените существующее значение константы на скопированный код.
5. Сохраните файл и проверьте результат.

### Способ 2: Автоматическая интеграция через скрипт (рекомендуется)

1. Сначала сохраните координаты в JSON-файл, нажав кнопку "Сохранить координаты в JSON" в веб-интерфейсе.
2. Запустите скрипт интеграции:
   ```
   python apply_coordinates_from_selector.py
   ```
3. При запросе укажите путь к сохранённому JSON-файлу или нажмите Enter для использования файла по умолчанию (`coordinates.json`).
4. Подтвердите путь к файлу генератора (обычно `image_certificate_generator.py`).
5. Скрипт автоматически:
   - Создаст резервную копию файла генератора (.bak)
   - Интегрирует новые координаты, сохраняя все существующие настройки
   - Сообщит о результате операции

Этот скрипт безопасно интегрирует новые координаты, сохраняя все предыдущие настройки для других шаблонов.

## Устранение проблем

1. **PDF не загружается**: Убедитесь, что ваш браузер поддерживает JavaScript и не блокирует выполнение скриптов.
2. **Некорректное отображение PDF**: Попробуйте другой браузер (Chrome или Firefox).
3. **Координаты смещаются**: Убедитесь, что в PDF нет слоев или скрытых элементов, которые могут влиять на отображение.
4. **Проблемы со сканированными PDF**: Инструмент лучше работает с векторными PDF, а не сканированными документами. 